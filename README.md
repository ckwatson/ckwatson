CKWatson Online
===============

A Chemical Kinetics Simulator Game as a webapp, written in Python.

![Screenshot](http://i.imgur.com/UVizS1S.png)

## Installation

Assuming you have `conda` installed:

```shell
conda create -n ckw python=3.7.6
conda activate ckw
pip install -r requirements.txt
```

## Setup

Make sure you are in the correct conda env:

```shell
conda activate ckw
```

### With Redis and gunicorn

In one terminal, do:

```shell
redis-server
```

Then, in another terminal:

```shell
gunicorn run:app --worker-class gevent --bind 127.0.0.1:80 --reload --timeout 6000
```

### With Flask alone

_Alternatively_, you can run the boot script directly:

```shell
sudo run.py
```

This uses Flask itself to host the server, but would lose the ability to send [Server-Sent Events](https://github.com/singingwolfboy/flask-sse).

## Deployment

### Via Docker

You can either run CKWatson as a single container or with Redis using Docker Compose.

To run CKWatson as a single container:
1. Build the image: `docker build -t ckw .`
2. Start a container: `docker run -p 80:80 --rm --name ckwatson ckw`

To run CKWatson with Redis, simply use `docker-compose up`.


### On Heroku

Please use [this Buildpack](https://github.com/dmathieu/heroku-buildpack-submodules#installation) for Auto-Deployment Support on submodules.


## Folder Structure

- `kernel` is where the actual code are stored.
- `puzzles` is the repository of puzzle definitions. Admin can add puzzles there using the `create` page.
- `web` stores the server program for web-based GUI. It translates user inputs into codes that the `kernel` could understand.
- `results` stores the computed results as well as plotted figures generated by the `kernel`. Not really human-readable.
